<!doctype html><html lang=en><head><script type=text/javascript>window.location.hostname.indexOf("www")==0?window.location.replace(window.location.href.replace("www.","")):window.location.hostname.indexOf("blog")==0&&window.location.replace("https://alshakib.dev/blog")</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta id=theme-color name=theme-color content="#fafafa"><link rel=apple-touch-icon sizes=57x57 href=https://alshakib.dev/images/fav/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://alshakib.dev/images/fav/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://alshakib.dev/images/fav/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://alshakib.dev/images/fav/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://alshakib.dev/images/fav/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://alshakib.dev/images/fav/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://alshakib.dev/images/fav/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://alshakib.dev/images/fav/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://alshakib.dev/images/fav/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=https://alshakib.dev/images/fav/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=https://alshakib.dev/images/fav/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=https://alshakib.dev/images/fav/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=https://alshakib.dev/images/fav/favicon-16x16.png><link rel=manifest href=fav/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="fav/ms-icon-144x144.png"><meta name=author content="Al Shakib"><meta name=description content="Tasker is intended to enable proper and easy use of the UI and background thread. It lets you perform operations in the background. When they’ve finished running, it then allows you to update views in the main event thread. In most applications, you’ll need a way to update its data. If you’re not careful, your application will do almost all of its work on the main event thread because this thread runs your event methods. If you just drop your heavy task code into the main event thread, then the main event thread will be busy with the heavy task, instead of rushing off to look for any events from the screen or other applications. If your heavy task code takes a long time to run, users will feel like the application has crashed. So, the trick is to move the heavy task code off the main event thread and run it a custom thread in the background."><meta name=keywords content="android,library,tasker,asynctask,thread,background thread,java,open source"><meta property="og:title" content="Let Me Introduce Tasker"><meta property="og:description" content="Tasker is intended to enable proper and easy use of the UI and background thread. It lets you perform operations in the background. When they’ve finished running, it then allows you to update views in the main event thread. In most applications, you’ll need a way to update its data. If you’re not careful, your application will do almost all of its work on the main event thread because this thread runs your event methods. If you just drop your heavy task code into the main event thread, then the main event thread will be busy with the heavy task, instead of rushing off to look for any events from the screen or other applications. If your heavy task code takes a long time to run, users will feel like the application has crashed. So, the trick is to move the heavy task code off the main event thread and run it a custom thread in the background."><meta property="og:type" content="article"><meta property="og:url" content="https://alshakib.dev/blog/let_me_introduce_tasker-18-07-2020/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-07-18T22:21:38+06:00"><meta property="article:modified_time" content="2020-07-18T22:21:38+06:00"><meta property="og:image" itemprop="image primaryImageOfPage" content="https://alshakib.dev/images/android_tasker_library/tasker_cover.png"><meta property="og:image:secure_url" itemprop="image primaryImageOfPage" content="https://alshakib.dev/images/android_tasker_library/tasker_cover.png"><meta name=twitter:card content="summary"><meta name=twitter:title content="Let Me Introduce Tasker"><meta name=twitter:description content="Tasker is intended to enable proper and easy use of the UI and background thread. It lets you perform operations in the background. When they’ve finished running, it then allows you to update views in the main event thread. In most applications, you’ll need a way to update its data. If you’re not careful, your application will do almost all of its work on the main event thread because this thread runs your event methods. If you just drop your heavy task code into the main event thread, then the main event thread will be busy with the heavy task, instead of rushing off to look for any events from the screen or other applications. If your heavy task code takes a long time to run, users will feel like the application has crashed. So, the trick is to move the heavy task code off the main event thread and run it a custom thread in the background."><meta property="twitter:image:src" content="https://alshakib.dev/images/android_tasker_library/tasker_cover.png"><base href=https://alshakib.dev/blog/let_me_introduce_tasker-18-07-2020/><title>Let Me Introduce Tasker · Al Shakib</title><link rel=canonical href=https://alshakib.dev/blog/let_me_introduce_tasker-18-07-2020/><link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,600;0,800;1,600;1,800&family=Source+Code+Pro:ital,wght@0,600;0,700;1,600;1,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link id=light-css rel=stylesheet href=https://alshakib.dev/css/alshakib.min.fef4aa0ff7d75a6364a16015b351091af80e6049cf51453774a6808eaee4bf8e.css integrity="sha256-/vSqD/fXWmNkoWAVs1EJGvgOYEnPUUU3dKaAjq7kv44=" crossorigin=anonymous media=screen><link id=light-syntax-highlight rel=stylesheet href=https://alshakib.dev/css/friendly.css><link id=dark-css rel=stylesheet href=https://alshakib.dev/css/alshakib-dark.min.b4fcd07d4dc7c9b2adc39edac400748abb4b18bc1b02ef697546bd6ac3681e86.css integrity="sha256-tPzQfU3HybKtw57axAB0irtLGLwbAu9pdUa9asNoHoY=" crossorigin=anonymous media=screen><link id=dark-syntax-highlight rel=stylesheet href=https://alshakib.dev/css/native.css><script type=text/javascript>function setDarkTheme(){document.getElementById('dark-css').disabled=!1,document.getElementById('dark-syntax-highlight').disabled=!1,document.getElementById('theme-color').content='#15202b',localStorage.setItem('theme','dark')}function setLightTheme(){document.getElementById('dark-css').disabled=!0,document.getElementById('dark-syntax-highlight').disabled=!0,document.getElementById('theme-color').content='#fafafa',localStorage.setItem('theme','light')}function getTheme(){return localStorage.getItem('theme')}getTheme()=='dark'?setDarkTheme():getTheme()!='light'&&window.matchMedia('(prefers-color-scheme: dark)').matches?setDarkTheme():setLightTheme()</script><link rel=alternate type=application/rss+xml href=https://alshakib.dev/blog/index.xml title="Al Shakib's Blog"><script async src="https://www.googletagmanager.com/gtag/js?id=G-MM1547446W"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-MM1547446W')</script></head><body class=colorscheme-light><main class=wrapper><nav id=navbar class=navigation><section class=container><a class=navigation-title href=https://alshakib.dev/>Home</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul id=navbar-list class=navigation-list><li class=navigation-item><a class=navigation-link href=https://alshakib.dev/about/>About</a></li><li class=navigation-item><a class=navigation-link href=https://alshakib.dev/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=https://alshakib.dev/blog/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://alshakib.dev/contact/>Contact</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><span onclick=onClickSwitchTheme()><i id=theme-icon class="fas fa-moon"></i></span></li></ul></section><button class=go-to-top onclick=onClickGoToTop() id=go-to-top-button title="Go to top">
<i class="fas fa-chevron-up"></i></button></nav><script type=text/javascript>var themeIcon=document.getElementById('theme-icon'),goToButton=document.getElementById('go-to-top-button'),navbar,navbarList;getTheme()=='dark'?themeIcon.className='fas fa-sun':themeIcon.className='fas fa-moon',navbar=document.getElementById('navbar'),navbarList=document.getElementById('navbar-list'),window.onscroll=function(){document.body.scrollTop>0||document.documentElement.scrollTop>0?(navbar.className='navigation is-scrolling',navbarList.className='navigation-list is-scrolling',goToButton.style.display='block'):(navbar.className='navigation',navbarList.className='navigation-list',goToButton.style.display='none')};function onClickSwitchTheme(){getTheme()=='dark'?(setLightTheme(),themeIcon.className='fas fa-moon'):(setDarkTheme(),themeIcon.className='fas fa-sun')}function onClickGoToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><div id=main-content class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Let Me Introduce Tasker</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar-alt"></i><time datetime=2020-07-18T22:21:38+06:00>July 18, 2020</time></span>
<span class=reading-time><i class="fas fa-clock"></i>4 min read</span></div><div class=categories><i class="fas fa-folder"></i><a href=https://alshakib.dev/categories/android/>Android</a></div><div class=tags><i class="fas fa-tag"></i><a href=https://alshakib.dev/tags/thread/>thread</a>
<span class=separator>•</span>
<a href=https://alshakib.dev/tags/tasker/>tasker</a>
<span class=separator>•</span>
<a href=https://alshakib.dev/tags/library/>library</a></div></div></header><div><img src=https://alshakib.dev/images/android_tasker_library/tasker_cover.png alt="Featured image"><aside><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#getting-started>Getting Started</a><ul><li><a href=#usages>Usages</a></li><li><a href=#the-onpreexecute-method>The <code>onPreExecute()</code> Method</a></li><li><a href=#the-doinbackground-method>The <code>doInBackground()</code> Method</a></li><li><a href=#the-onpostexecute-method>The <code>onPostExecute()</code> Method</a></li></ul></li><li><a href=#final-words>Final Words</a></li></ul></nav></aside><h2 id=introduction>Introduction</h2><p>In most applications, you’ll need a way to update its data. If you’re not careful, your application will do almost all of its work on the main event thread because this thread runs your event methods. If you just drop your heavy task code into the main event thread, then the main event thread will be busy with the heavy task, instead of rushing off to look for any events from the screen or other applications. If your heavy task code takes a long time to run, users will feel like the application has crashed. So, the trick is to move the heavy task code off the main event thread and run it a custom thread in the background.</p><p>Up to Android SDK 29, you could use <code>AsyncTask</code> to write efficient multithreaded code to keep your application speedy. But the <code>AsyncTask</code> class was deprecated in API level 30. Android reference suggests to use the standard <code>java.util.concurrent</code> utilities instead. They recommended the various APIs provided by the <code>java.util.concurrent</code> package such as <code>Executor</code>, <code>ThreadPoolExecutor</code> and <code>FutureTask</code>.</p><p><code>Tasker</code> is intended to enable proper and easy use of the UI and background thread. It lets you perform operations in the background. When they’ve finished running, it then allows you to update views in the main event thread.</p><h2 id=getting-started>Getting Started</h2><p>To use <code>Tasker</code> in your project, follow installation instructions from <a href=https://github.com/AlShakib/Tasker target=_blank>here</a>
. The latest version is available for Android SDK 14 and higher.</p><h3 id=usages>Usages</h3><p>For basic usages, you&rsquo;ll need to create a <code>Tasker</code> object, and pass a <code>Tasker.Task&lt;Result></code> object to the <code>executeAsync()</code> method.</p><p>You can create a <code>Tasker.Task&lt;Result></code> class by extending the <code>Tasker.Task&lt;Result></code> class, and implementing its <code>doInBackground()</code> method. The code in this method runs in a background thread, so it&rsquo;s the perfect place for you to put your code for a heavy job. The <code>Tasker.Task&lt;Result></code> class also has an <code>onPreExecute()</code> method that runs before <code>doInBackground()</code> and an <code>onPostExecute()</code> method that runs afterward.</p><p><code>Tasker.Task</code> is defined by a generic parameter: Result which is the type of the task result. You can set this to Void if you&rsquo;re not going to use it.</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>class</span> <span class=nc>MyTask</span> <span class=kd>extends</span> <span class=n>Tasker</span><span class=o>.</span><span class=na>Task</span><span class=o>&lt;</span><span class=n>Result</span><span class=o>&gt;</span> <span class=o>{</span>

    <span class=nd>@Override</span>
    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPreExecute</span><span class=o>()</span> <span class=o>{</span>
        <span class=c1>// Code to run before executing the task.
</span><span class=c1></span>    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>protected</span> <span class=n>Result</span> <span class=nf>doInBackground</span><span class=o>()</span> <span class=o>{</span>
        <span class=c1>// Code that you want to run in a background thread.
</span><span class=c1></span>        <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPostExecute</span><span class=o>(</span><span class=n>Result</span> <span class=n>result</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// Code that you want to run when the task is complete.
</span><span class=c1></span>    <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>You can run a Task by calling the Tasker <code>executeAsync()</code> method and passing it a <code>Tasker.Task</code> object.</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=n>Tasker</span> <span class=n>tasker</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Tasker</span><span class=o>();</span>
<span class=n>tasker</span><span class=o>.</span><span class=na>executeAsync</span><span class=o>(</span><span class=k>new</span> <span class=n>MyTask</span><span class=o>());</span>
</code></pre></div><h3 id=the-onpreexecute-method>The <code>onPreExecute()</code> Method</h3><p>This gets called before the background task begins, and it’s used to set up the task. It’s called on the main event thread, so it has access to views in the user interface. The <code>onPreExecute()</code> method takes no parameters, and has a void return type. For example,</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=nd>@Override</span>
<span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPreExecute</span><span class=o>()</span> <span class=o>{</span>

    <span class=c1>// Show progress bar before start downloading.
</span><span class=c1></span>    <span class=n>progressBar</span><span class=o>.</span><span class=na>setVisibility</span><span class=o>(</span><span class=n>View</span><span class=o>.</span><span class=na>VISIBLE</span><span class=o>);</span>
<span class=o>}</span>

</code></pre></div><h3 id=the-doinbackground-method>The <code>doInBackground()</code> Method</h3><p>The <code>doInBackground()</code> method runs in the background immediately after <code>onPreExecute()</code>. You can define what type of parameters the task should receive, and what the return type should be. For example,</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=nd>@Override</span>
<span class=kd>protected</span> <span class=n>Bitmap</span> <span class=nf>doInBackground</span><span class=o>()</span> <span class=o>{</span>

    <span class=c1>// Download the image in the background
</span><span class=c1></span>    <span class=c1>// and then convert it to Bitmap.
</span><span class=c1></span>    <span class=n>Bitmap</span> <span class=n>result</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
    <span class=k>try</span> <span class=o>{</span>
        <span class=n>URL</span> <span class=n>ImageUrl</span> <span class=o>=</span> <span class=k>new</span> <span class=n>URL</span><span class=o>(</span><span class=n>getResources</span><span class=o>().</span><span class=na>getString</span><span class=o>(</span><span class=n>R</span><span class=o>.</span><span class=na>string</span><span class=o>.</span><span class=na>image_url</span><span class=o>));</span>
        <span class=n>HttpURLConnection</span> <span class=n>conn</span> <span class=o>=</span> <span class=o>(</span><span class=n>HttpURLConnection</span><span class=o>)</span> <span class=n>ImageUrl</span><span class=o>.</span><span class=na>openConnection</span><span class=o>();</span>
        <span class=n>conn</span><span class=o>.</span><span class=na>setDoInput</span><span class=o>(</span><span class=kc>true</span><span class=o>);</span>
        <span class=n>conn</span><span class=o>.</span><span class=na>connect</span><span class=o>();</span>
        <span class=n>InputStream</span> <span class=n>inputStream</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=na>getInputStream</span><span class=o>();</span>
        <span class=n>BitmapFactory</span><span class=o>.</span><span class=na>Options</span> <span class=n>options</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BitmapFactory</span><span class=o>.</span><span class=na>Options</span><span class=o>();</span>
        <span class=n>options</span><span class=o>.</span><span class=na>inPreferredConfig</span> <span class=o>=</span> <span class=n>Bitmap</span><span class=o>.</span><span class=na>Config</span><span class=o>.</span><span class=na>RGB_565</span><span class=o>;</span>
        <span class=n>result</span> <span class=o>=</span> <span class=n>BitmapFactory</span><span class=o>.</span><span class=na>decodeStream</span><span class=o>(</span><span class=n>inputStream</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=n>options</span><span class=o>);</span>
    <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>IOException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
    <span class=o>}</span>
    <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
<span class=o>}</span>
</code></pre></div><h3 id=the-onpostexecute-method>The <code>onPostExecute()</code> Method</h3><p>The <code>onPostExecute()</code> method is called after the background task has finished. You can use this method to present the results of the task to the user. The <code>onPostExecute()</code> method gets passed the results of the <code>doInBackground()</code> method, so it must take parameters that match the <code>doInBackground()</code> return type. For example,</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=nd>@Override</span>
<span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPostExecute</span><span class=o>(</span><span class=n>Bitmap</span> <span class=n>result</span><span class=o>)</span> <span class=o>{</span>

    <span class=c1>// When the doInBackground method is completed,
</span><span class=c1></span>    <span class=c1>// this method is going to be called.
</span><span class=c1></span>    <span class=c1>// Here we will set result to the image view.
</span><span class=c1></span>    <span class=n>progressBar</span><span class=o>.</span><span class=na>setVisibility</span><span class=o>(</span><span class=n>View</span><span class=o>.</span><span class=na>GONE</span><span class=o>);</span>
    
    <span class=k>if</span> <span class=o>(</span><span class=n>result</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>resultImageView</span><span class=o>.</span><span class=na>setImageBitmap</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
        <span class=n>resultTextView</span><span class=o>.</span><span class=na>setText</span><span class=o>(</span><span class=n>getResources</span><span class=o>().</span><span class=na>getString</span><span class=o>(</span><span class=n>R</span><span class=o>.</span><span class=na>string</span><span class=o>.</span><span class=na>result_error</span><span class=o>));</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><h2 id=final-words>Final Words</h2><p>Thanks for reading this article. If you have any question or confusion regarding the tutorial, feel free to ask your questions on <a href=https://t.me/AlShakib target=_blank>Telegram</a>
or <a href=https://twitter.com/_alshakib target=_blank>Twitter</a>
. You can send me an email as well.</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2020 -
2021
Al Shakib</section></footer></main><script type=text/javascript>var menuToggleButton=document.getElementById('menu-toggle');document.getElementById('main-content').onclick=function(a){menuToggleButton.checked=!1}</script></body></html>